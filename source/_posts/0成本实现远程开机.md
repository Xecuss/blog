---
title: 0成本实现远程开机
date: 2021-02-09 11:31:51
tags: ['网络']
---
马上就要放假回家了，几公斤重的主机那当然是带不回去的，手头能用的就只有一台Surface Book初代，然而这已经是6年前的设备了，i5-6300U + GTX940MX的配置实属不够用。想到前不久折腾局域网串流时用过的parsec似乎也能支持广域网串流，能不能用笔记本串流到主机上用呢？那当然是可以的。然而主机毕竟不是服务器，不可能一天24小时开着。那么完成这个计划的第一步，就是实现远程开机了。

## 远程开机的方法

经过一番搜索，我找到了这么几种可以实现远程开机的方法：
1. 远程开机棒
2. 智能插座 + BIOS设置通电即开机
3. Wake On LAN

其中1和2都是需要购买额外的硬件来实现的，那么穷如我自然不可能选择需要收费的快乐。白嫖一时爽，一直白嫖一直爽。我决定用方案3来实现。

## Wake On LAN

Wake-On-LAN简称WOL，是一种电源管理功能；如果存在网络活动，则允许设备将操作系统从待机或休眠模式中唤醒。许多主板厂商支持IBM提出的网络唤醒标准。该标准允许网络管理员远程打开PC机电源,以便进行文件升级、资源跟踪和设备清点等工作。WOL在还未广泛的采用,但在网络时代却具有广阔的发展前景。

Wake-On-LAN的实现，主要是向目标主机发送特殊格式的数据包，是AMD公司制作的MagicPacket这套软件以生成网络唤醒所需要的特殊数据包，俗称魔术包（Magic Packet）。MagicPacket格式虽然只是AMD公司开发推广的技术，并非世界公认的标准，但是仍然受到很多网卡制造商的支持，因此许多具有网络唤醒功能的网卡都能与之兼容。

观察WOL的定义可知，要成功实现WOL，具有以下要点：
1. 硬件需要支持WOL
2. 需要远程向目标主机发送幻数据包(Magic Packet)

## 开启WOL的硬件支持

一般来讲，较新的主板都是支持WOL的，只不过默认不会开启，因此我们需要进入BIOS开启WOL的支持，各个主板生产商的操作步骤不一样，但是大差不差。对于我正在用的MSI B450 MORTAR来说，需要开启*高级->唤醒事件管理->PCIE设备唤醒*以及*高级->整合周边设备->网卡ROM启动*，然后硬件上的设置就完成了。

这里有一个注意点是，在搜索的过程中听说开启快速启动的时候会导致无法唤醒。这个问题我没有遇到，快速启动似乎默认就是关闭的。

